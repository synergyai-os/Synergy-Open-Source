import{k as v,B as N,l as E,i as R,o as I,t as C,p as F,q as K,A as f,r as m,u as g,v as h,x as P,H as O,w as W}from"./hVhnLUET.js";import{T as b,U as k,V as l,j as A,a1 as B,a4 as z}from"./kOT-I_MI.js";function r(e){let t=b(k(e));return{[N]:!0,[v]:!0,get current(){return A(t)},set current(n){l(t,n,!0)}}}r.from=E;r.with=R;r.flatten=I;r.readonly=C;r.isBox=F;r.isWritableBox=K;function D(e){B(()=>()=>{e()})}function H(e){z().then(e)}function M(e){return window.getComputedStyle(e).getPropertyValue("direction")}function q(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?g:m,vertical:h}[t]}function V(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?m:g,vertical:f}[t]}function _(e="ltr",t="horizontal"){return["ltr","rtl"].includes(e)||(e="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:q(e,t),prevKey:V(e,t)}}const G=typeof document<"u",Q=L();function L(){return G&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function U(e){return e instanceof HTMLElement}function X(e){return e instanceof Element}function Y(e){return e instanceof Element||e instanceof SVGElement}function Z(e){return e.matches(":focus-visible")}function tt(e){return e!==null}function et(e){return e instanceof HTMLInputElement&&"select"in e}class nt{#t;#e=r(null);constructor(t){this.#t=t}getCandidateNodes(){return this.#t.rootNode.current?this.#t.candidateSelector?Array.from(this.#t.rootNode.current.querySelectorAll(this.#t.candidateSelector)):this.#t.candidateAttr?Array.from(this.#t.rootNode.current.querySelectorAll(`[${this.#t.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const t=this.getCandidateNodes();t.length&&t[0]?.focus()}handleKeydown(t,n,i=!1){const c=this.#t.rootNode.current;if(!c||!t)return;const s=this.getCandidateNodes();if(!s.length)return;const u=s.indexOf(t),w=M(c),{nextKey:p,prevKey:y}=_(w,this.#t.orientation.current),x=this.#t.loop.current,d={[p]:u+1,[y]:u-1,[O]:0,[P]:s.length-1};if(i){const S=p===h?m:h,T=y===f?g:f;d[S]=u+1,d[T]=u-1}let o=d[n.key];if(o===void 0)return;n.preventDefault(),o<0&&x?o=s.length-1:o===s.length&&x&&(o=0);const a=s[o];if(a)return a.focus(),this.#e.current=a.id,this.#t.onCandidateFocus?.(a),a}getTabIndex(t){const n=this.getCandidateNodes(),i=this.#e.current!==null;return t&&!i&&n[0]===t?(this.#e.current=t.id,0):t?.id===this.#e.current?0:-1}setCurrentTabStopId(t){this.#e.current=t}focusCurrentTabStop(){const t=this.#e.current;if(!t)return;const n=this.#t.rootNode.current?.querySelector(`#${t}`);!n||!U(n)||n.focus()}}class ${#t;#e=null;constructor(t){this.#t=t,D(()=>this.#r())}#r(){this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null)}run(t){this.#r();const n=this.#t.ref.current;if(n){if(typeof n.getAnimations!="function"){this.#n(t);return}this.#e=window.requestAnimationFrame(()=>{const i=n.getAnimations();if(i.length===0){this.#n(t);return}Promise.allSettled(i.map(c=>c.finished)).then(()=>{this.#n(t)})})}}#n(t){const n=()=>{t()};this.#t.afterTick?H(n):n()}}class rt{#t;#e;#r;#n=b(!1);constructor(t){this.#t=t,l(this.#n,t.open.current,!0),this.#e=t.enabled??!0,this.#r=new $({ref:this.#t.ref,afterTick:this.#t.open}),W(()=>this.#t.open.current,n=>{n&&l(this.#n,!0),this.#e&&this.#r.run(()=>{n===this.#t.open.current&&(this.#t.open.current||l(this.#n,!1),this.#t.onComplete?.())})})}get shouldRender(){return A(this.#n)}}export{rt as P,nt as R,H as a,X as b,G as c,et as d,U as e,Y as f,Q as g,tt as h,Z as i,D as o};
