import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Docs/Token Reference" />

# Token Reference

Complete reference for all design tokens in the SynergyOS design system.

---

## ğŸ¯ Token Usage Rules

**ALWAYS use tokens, NEVER hardcode values:**

âŒ **WRONG**: `class="px-4 py-2 bg-blue-600"`  
âœ… **CORRECT**: `class="px-button-x py-button-y bg-accent-primary"`

**Why?** Tokens cascade automatically. Change once, updates everywhere.

**Automated Enforcement:**

- âœ… **ESLint Plugin**: Blocks arbitrary values like `min-h-[2.75rem]`, `p-[12px]`
- âœ… **Pre-commit Hook**: Prevents committing hardcoded Tailwind values
- âœ… **CI Validation**: GitHub Actions runs `npm run lint` - PRs blocked if violations detected

---

## ğŸ”„ Token Cascade System

**Understanding how tokens flow from base â†’ semantic â†’ utility:**

### Three-Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BASE TOKENS (Foundation)                                   â”‚
â”‚  Hardcoded values: 0.5rem, 1rem, 1.5rem                    â”‚
â”‚  Example: spacing.2 = "0.5rem"                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ References
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SEMANTIC TOKENS (Component-specific)                      â”‚
â”‚  Reference base tokens: {spacing.2}                        â”‚
â”‚  Example: spacing.nav.item.x = "{spacing.2}"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ Generates
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UTILITY CLASSES (CSS classes)                              â”‚
â”‚  Generated from semantic tokens                             â”‚
â”‚  Example: px-nav-item â†’ var(--spacing-nav-item-x)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### How Cascade Works

**Base tokens** are the foundation - they contain hardcoded values:

```json
{
	"spacing": {
		"2": {
			"$value": "0.5rem",
			"$description": "8px = sm"
		}
	}
}
```

**Semantic tokens** reference base tokens using `{spacing.X}` format:

```json
{
	"spacing": {
		"nav": {
			"item": {
				"x": {
					"$value": "{spacing.2}",
					"$description": "Nav item horizontal padding"
				}
			}
		}
	}
}
```

**Utility classes** are automatically generated from semantic tokens:

```css
/* Generated CSS */
.px-nav-item {
	padding-left: var(--spacing-nav-item-x);
	padding-right: var(--spacing-nav-item-x);
}
```

### Cascade Benefits

**Change once, update everywhere:**

1. Update base token: `spacing.2 = "0.75rem"` (was `0.5rem`)
2. All semantic tokens update automatically: `spacing.nav.item.x` â†’ `0.75rem`
3. All components using `px-nav-item` update automatically
4. **No component code changes needed** âœ…

**Example cascade:**

```json
// Base token change
"spacing.2": "0.75rem"  // Changed from 0.5rem

// Semantic tokens automatically update
"spacing.nav.item.x": "{spacing.2}"      // â†’ 0.75rem âœ…
"spacing.menu.item.x": "{spacing.2}"      // â†’ 0.75rem âœ…
"spacing.badge.x": "{spacing.2}"          // â†’ 0.75rem âœ…
```

---

## ğŸ“ Reference Format

**Understanding the `{spacing.X}` syntax:**

### What Does `{spacing.2}` Mean?

The `{spacing.2}` format is **DTCG (Design Tokens Community Group) reference syntax**. It tells the token system to:

1. Look up the base token `spacing.2`
2. Use its value (`0.5rem`)
3. Create a reference relationship (cascade)

### Reference Format Rules

**âœ… CORRECT - References base token:**

```json
{
	"spacing": {
		"nav": {
			"item": {
				"x": {
					"$value": "{spacing.2}", // âœ… References base token
					"$description": "Nav item horizontal padding"
				}
			}
		}
	}
}
```

**âŒ WRONG - Hardcoded value (breaks cascade):**

```json
{
	"spacing": {
		"nav": {
			"item": {
				"x": {
					"$value": "0.5rem", // âŒ Hardcoded - won't cascade
					"$description": "Nav item horizontal padding"
				}
			}
		}
	}
}
```

### Exception Tokens

Some tokens intentionally don't reference base tokens (optimized for specific components). These must be documented:

```json
{
	"spacing": {
		"nav": {
			"item": {
				"y": {
					"$value": "0.375rem", // Exception: 6px (not in base scale)
					"$description": "6px - INTENTIONAL EXCEPTION: Optimal touch target size. spacing.1 (4px) too small, spacing.2 (8px) too large."
				}
			}
		}
	}
}
```

**Validation**: Run `npm run tokens:validate-semantic` to check all semantic tokens reference base tokens correctly.

---

## ğŸ“ Spacing Tokens

### Base Scale (4px unit)

All spacing tokens reference this base scale:

| Token          | Value   | Pixels | Usage                |
| -------------- | ------- | ------ | -------------------- |
| `--spacing-0`  | 0       | 0px    | No spacing           |
| `--spacing-1`  | 0.25rem | 4px    | Extra small spacing  |
| `--spacing-2`  | 0.5rem  | 8px    | Small spacing        |
| `--spacing-3`  | 0.75rem | 12px   | Medium-small spacing |
| `--spacing-4`  | 1rem    | 16px   | Medium spacing       |
| `--spacing-5`  | 1.25rem | 20px   | Medium-large spacing |
| `--spacing-6`  | 1.5rem  | 24px   | Large spacing        |
| `--spacing-8`  | 2rem    | 32px   | Extra large spacing  |
| `--spacing-12` | 3rem    | 48px   | 2XL spacing          |
| `--spacing-16` | 4rem    | 64px   | 3XL spacing          |

### Semantic Spacing Tokens

Component-specific spacing tokens (reference base scale):

#### Application UI Tokens

| Token                       | Utility Class      | Value           | References    | Usage                                 |
| --------------------------- | ------------------ | --------------- | ------------- | ------------------------------------- |
| `--spacing-nav-container-x` | `px-nav-container` | 0.5rem (8px)    | `{spacing.2}` | Nav container horizontal padding      |
| `--spacing-nav-container-y` | `py-nav-container` | 0.5rem (8px)    | `{spacing.2}` | Nav container vertical padding        |
| `--spacing-nav-item-x`      | `px-nav-item`      | 0.5rem (8px)    | `{spacing.2}` | Nav item horizontal padding           |
| `--spacing-nav-item-y`      | `py-nav-item`      | 0.375rem (6px)  | Exception\*   | Nav item vertical padding             |
| `--spacing-menu-item-x`     | `px-menu-item`     | 0.625rem (10px) | Exception\*   | Menu/dropdown item horizontal padding |
| `--spacing-menu-item-y`     | `py-menu-item`     | 0.375rem (6px)  | Exception\*   | Menu/dropdown item vertical padding   |
| `--spacing-badge-x`         | `px-badge`         | 0.375rem (6px)  | Exception\*   | Badge horizontal padding              |
| `--spacing-badge-y`         | `py-badge`         | 0.125rem (2px)  | Exception\*   | Badge vertical padding                |
| `--spacing-icon-gap`        | `gap-icon`         | 0.5rem (8px)    | `{spacing.2}` | Standard icon-text gap                |
| `--spacing-icon-gap-wide`   | `gap-icon-wide`    | 0.625rem (10px) | Exception\*   | Wider icon-text gap                   |

\* **Exception tokens**: These values don't map to base scale (optimized for specific components). See `design-system.json` for exception documentation.

#### Button Component Tokens

| Token                    | Utility Class      | Value          | References    | Usage                               |
| ------------------------ | ------------------ | -------------- | ------------- | ----------------------------------- |
| `--spacing-button-x`     | `px-button-x`      | 1.5rem (24px)  | `{spacing.6}` | Button horizontal padding           |
| `--spacing-button-y`     | `py-button-y`      | 0.75rem (12px) | `{spacing.3}` | Button vertical padding             |
| `--spacing-button-icon`  | `p-button-icon`    | 0.75rem (12px) | `{spacing.3}` | Icon-only button padding (square)   |
| `--size-button-height`   | `min-h-button`     | 2.75rem (44px) | Exception\*   | Minimum button height (all types)   |
| `--spacing-button-group` | `gap-button-group` | 0.5rem (8px)   | `{spacing.2}` | Gap between buttons in action group |

\* **Exception tokens**: See `design-system.json` for exception documentation.

#### Card Component Tokens

| Token                      | Utility Class | Value          | References    | Usage                   |
| -------------------------- | ------------- | -------------- | ------------- | ----------------------- |
| `--spacing-card-padding-x` | `px-card`     | 1.25rem (20px) | `{spacing.5}` | Card horizontal padding |
| `--spacing-card-padding-y` | `py-card`     | 1.25rem (20px) | `{spacing.5}` | Card vertical padding   |

#### Marketing Page Tokens

| Token                              | Utility Class            | Value         | References     | Usage                                     |
| ---------------------------------- | ------------------------ | ------------- | -------------- | ----------------------------------------- |
| `--spacing-marketing-section-y`    | `py-marketing-section`   | 7rem (112px)  | `{spacing.28}` | Section vertical padding (top and bottom) |
| `--spacing-marketing-container-x`  | `px-marketing-container` | 1.5rem (24px) | `{spacing.6}`  | Page horizontal padding (mobile/desktop)  |
| `--spacing-marketing-card-padding` | `p-marketing-card`       | 2.5rem (40px) | `{spacing.10}` | Card internal padding                     |
| `--spacing-marketing-card-gap`     | `gap-marketing-card`     | 2rem (32px)   | `{spacing.8}`  | Gap between cards in grid                 |

### Cascade Example: How Changes Propagate

**Visual example showing how updating a base token cascades through the system:**

#### Before Change

```json
// Base token
"spacing.2": "0.5rem"  // 8px

// Semantic tokens (all reference base)
"spacing.nav.item.x": "{spacing.2}"      // â†’ 0.5rem (8px)
"spacing.menu.item.x": "{spacing.2}"     // â†’ 0.5rem (8px)
"spacing.badge.x": "{spacing.2}"         // â†’ 0.5rem (8px)
"spacing.button.group": "{spacing.2}"    // â†’ 0.5rem (8px)

// Components using utilities
<group â†’ px-nav-item â†’ 0.5rem (8px)
px-menu-item â†’ 0.5rem (8px)
px-badge â†’ 0.5rem (8px)
gap-button-group â†’ 0.5rem (8px)
```

#### After Base Token Change

```json
// Update base token once
"spacing.2": "0.75rem"  // Changed from 0.5rem to 0.75rem (12px)

// Semantic tokens automatically update (no changes needed)
"spacing.nav.item.x": "{spacing.2}"      // â†’ 0.75rem (12px) âœ…
"spacing.menu.item.x": "{spacing.2}"     // â†’ 0.75rem (12px) âœ…
"spacing.badge.x": "{spacing.2}"         // â†’ 0.75rem (12px) âœ…
"spacing.button.group": "{spacing.2}"    // â†’ 0.75rem (12px) âœ…

// Components automatically update (no code changes needed)
px-nav-item â†’ 0.75rem (12px) âœ…
px-menu-item â†’ 0.75rem (12px) âœ…
px-badge â†’ 0.75rem (12px) âœ…
gap-button-group â†’ 0.75rem (12px) âœ…
```

**Result**: Change one base token, update 4+ semantic tokens and all components automatically. **No component code changes needed.**

### Utility Classes

**Use utility classes in components:**

```svelte
<!-- Button -->
<button class="min-h-button rounded-button px-button-x py-button-y"> Click me </button>

<!-- Card -->
<div class="rounded-card bg-elevated px-card py-card">Card content</div>

<!-- Nav Item -->
<a class="flex items-center gap-icon px-nav-item py-nav-item">
	<Icon class="icon-md" />
	<span>Nav Item</span>
</a>
```

---

## ğŸ¨ Color Tokens

### Semantic Colors (Auto Dark Mode)

All color tokens adapt automatically to light/dark mode:

#### Surface Colors

<div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--spacing-4)' }}>
	<div
		style={{
			background: 'var(--color-bg-base)',
			padding: 'var(--spacing-4)',
			borderRadius: '8px',
			border: '1px solid var(--color-border-base)'
		}}
	>
		<code>bg-base</code> - Base background (page background)
	</div>
	<div
		style={{
			background: 'var(--color-bg-surface)',
			padding: 'var(--spacing-4)',
			borderRadius: '8px',
			border: '1px solid var(--color-border-base)'
		}}
	>
		<code>bg-surface</code> - Surface background (panels, lists)
	</div>
	<div
		style={{
			background: 'var(--color-bg-elevated)',
			padding: 'var(--spacing-4)',
			borderRadius: '8px',
			border: '1px solid var(--color-border-elevated)'
		}}
	>
		<code>bg-elevated</code> - Elevated surfaces (cards, modals)
	</div>
</div>

#### Text Colors

<div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--spacing-2)' }}>
	<div style={{ color: 'var(--color-text-primary)' }}>
		<code>text-primary</code> - Primary text (headings, important content)
	</div>
	<div style={{ color: 'var(--color-text-secondary)' }}>
		<code>text-secondary</code> - Secondary text (descriptions, subtitles)
	</div>
	<div style={{ color: 'var(--color-text-tertiary)' }}>
		<code>text-tertiary</code> - Tertiary text (labels, hints)
	</div>
</div>

#### Accent Colors

<div style={{ display: 'flex', gap: 'var(--spacing-4)', flexWrap: 'wrap' }}>
	<div
		style={{
			background: 'var(--color-accent-primary)',
			padding: 'var(--spacing-4)',
			borderRadius: '8px',
			color: 'white'
		}}
	>
		<code>bg-accent-primary</code>
	</div>
	<div
		style={{
			background: 'var(--color-bg-selected)',
			padding: 'var(--spacing-4)',
			borderRadius: '8px',
			color: 'white'
		}}
	>
		<code>bg-selected</code>
	</div>
</div>

#### Interactive States

<div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--spacing-2)' }}>
	<div
		style={{
			background: 'var(--color-bg-hover)',
			padding: 'var(--spacing-4)',
			borderRadius: '8px'
		}}
	>
		<code>bg-hover</code> - Hover background (subtle, 50% opacity)
	</div>
	<div
		style={{
			background: 'var(--color-bg-hover-solid)',
			padding: 'var(--spacing-4)',
			borderRadius: '8px'
		}}
	>
		<code>bg-hover-solid</code> - Hover background (solid)
	</div>
</div>

#### Complete Color Reference

| Token                     | Utility Class          | Dark Mode   | Light Mode  | Usage                                      |
| ------------------------- | ---------------------- | ----------- | ----------- | ------------------------------------------ |
| `--color-text-primary`    | `text-primary`         | white       | gray-900    | Primary text (headings, important content) |
| `--color-text-secondary`  | `text-secondary`       | gray-300    | gray-600    | Secondary text (descriptions, subtitles)   |
| `--color-text-tertiary`   | `text-tertiary`        | gray-500    | gray-500    | Tertiary text (labels, hints)              |
| `--color-bg-base`         | `bg-base`              | gray-900    | white       | Base background (page background)          |
| `--color-bg-surface`      | `bg-surface`           | gray-800    | gray-50     | Surface background (panels, lists)         |
| `--color-bg-elevated`     | `bg-elevated`          | gray-750    | white       | Elevated surfaces (cards, modals)          |
| `--color-border-base`     | `border-base`          | gray-800    | gray-200    | Base borders                               |
| `--color-border-elevated` | `border-elevated`      | gray-700    | gray-300    | Elevated borders (cards)                   |
| `--color-accent-primary`  | `bg-accent-primary`    | blue-600    | blue-600    | Primary accent (selected states, links)    |
| `--color-bg-hover`        | `hover:bg-hover`       | gray-800/50 | gray-100/50 | Hover background (subtle)                  |
| `--color-bg-hover-solid`  | `hover:bg-hover-solid` | gray-800    | gray-100    | Hover background (solid)                   |
| `--color-bg-selected`     | `bg-selected`          | blue-600    | blue-600    | Selected state background                  |
| `--color-tag-bg`          | `bg-tag`               | gray-700    | gray-100    | Tag/chip background                        |
| `--color-tag-text`        | `text-tag`             | gray-300    | gray-600    | Tag/chip text                              |

---

## âœï¸ Typography Tokens

### Font Families

**Base Fonts:**

```css
font-sans /* Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif */
font-mono /* JetBrains Mono, Menlo, Monaco, 'Courier New', monospace */
font-serif /* Georgia, Cambria, 'Times New Roman', serif */
```

**Semantic Fonts (Reference Base Fonts):**

```css
font-heading /* var(--fonts-sans) - For all headings (h1-h6, Heading component) */
font-body /* var(--fonts-sans) - For body text, paragraphs, UI components (Button, Badge, Text) */
font-code /* var(--fonts-mono) - For code blocks, inline code, KeyboardShortcut component */
```

**Cascade Example:**
Change `--fonts-sans` in `design-system.json` â†’ All headings + body text update automatically (no code changes needed).

### Text Sizes

| Token               | Utility Class | Size            | Line Height | Usage               |
| ------------------- | ------------- | --------------- | ----------- | ------------------- |
| `--font-size-h1`    | `text-h1`     | 2.25rem (36px)  | 700         | Page titles         |
| `--font-size-h2`    | `text-h2`     | 1.75rem (28px)  | 600         | Section headings    |
| `--font-size-h3`    | `text-h3`     | 1.25rem (20px)  | 600         | Subsection headings |
| `--font-size-body`  | `text-body`   | 1rem (16px)     | 1.5rem      | Body text           |
| `--font-size-small` | `text-small`  | 0.875rem (14px) | 1.25rem     | Captions, labels    |
| `--text-label`      | `text-label`  | 0.625rem (10px) | 1rem        | Form labels, badges |

**Example:**

```svelte
<h1 class="font-heading text-h1 text-primary">Page Title</h1>
<h2 class="font-heading text-h2 text-primary">Section Title</h2>
<p class="font-body text-body text-secondary">Body text content</p>
<span class="font-body text-small text-tertiary">Caption text</span>
<span class="bg-tag px-badge py-badge font-body text-label text-tag">Badge</span>
<code class="font-code text-small">const example = 'code';</code>
```

### Readability Tokens (Optimized for ADHD/Focus-Challenged Users)

| Token                        | Utility Class       | Value         | Usage                                             |
| ---------------------------- | ------------------- | ------------- | ------------------------------------------------- |
| `--line-height-readable`     | `leading-readable`  | 1.75          | Optimal line-height for comfortable reading       |
| `--letter-spacing-readable`  | `tracking-readable` | 0 (normal)    | Normal letter spacing                             |
| `--max-width-readable`       | `max-w-readable`    | 42rem (672px) | Optimal reading width (65-75 characters per line) |
| `--spacing-readable-quote-y` | `py-readable-quote` | 2rem (32px)   | Vertical padding for quote/highlight containers   |

---

## ğŸ“ Border Radius Tokens

| Token                    | Utility Class    | Value           | Usage              |
| ------------------------ | ---------------- | --------------- | ------------------ |
| `--border-radius-button` | `rounded-button` | 0.5rem (8px)    | Buttons            |
| `--border-radius-card`   | `rounded-card`   | 0.875rem (14px) | Cards              |
| `--border-radius-dialog` | `rounded-dialog` | 0.875rem (14px) | Dialogs, modals    |
| `--border-radius-input`  | `rounded-input`  | 0.125rem (2px)  | Form inputs        |
| `--border-radius-badge`  | `rounded-badge`  | 0.25rem (4px)   | Badges             |
| `--border-radius-chip`   | `rounded-chip`   | 9999px (full)   | Chips (pill shape) |

**Example:**

```svelte
<button class="rounded-button bg-accent-primary px-button-x py-button-y">Button</button>
<div class="rounded-card bg-elevated px-card py-card">Card</div>
<input class="rounded-input border border-base px-input-x py-input-y" />
<span class="rounded-badge bg-tag px-badge py-badge text-tag">Badge</span>
```

---

## ğŸ¨ Shadow Tokens

Shadow tokens provide consistent elevation and depth for UI elements:

| Token              | Utility Class    | Value                                                    | Usage                |
| ------------------ | ---------------- | -------------------------------------------------------- | -------------------- |
| `--shadow-card`    | `shadow-card`    | 0 2px 8px rgb(0 0 0 / 0.08), 0 1px 2px rgb(0 0 0 / 0.04) | Card elevation       |
| `--shadow-pinglow` | `shadow-pinglow` | 0 0 0 3px var(--color-accent-primary) / 0.15             | PIN input focus glow |

**Example:**

```svelte
<div class="rounded-card bg-elevated px-card py-card shadow-card">Elevated card with shadow</div>

<!-- PIN input with focus glow -->
<input class="shadow-pinglow" />
```

**Cascade Example:**

Change shadow color in `design-system.json`:

```json
{
	"shadow": {
		"pinglow": {
			"$value": "0 0 0 4px var(--color-accent-primary) / 0.2" // Changed size and opacity
		}
	}
}
```

After running `npm run tokens:build`:

- âœ… CSS variable updates: `--shadow-pinglow: 0 0 0 4px var(--color-accent-primary) / 0.2`
- âœ… All PIN inputs use new shadow automatically
- âœ… No code changes needed

---

## ğŸ“ Size Tokens

Size tokens define fixed dimensions for consistent UI element sizing:

### Component Sizes

| Token                  | Utility Class    | Value          | Usage                                 |
| ---------------------- | ---------------- | -------------- | ------------------------------------- |
| `--size-button-height` | `min-h-button`   | 2.75rem (44px) | Minimum button height (accessibility) |
| `--size-icon-xs`       | `icon-xs`        | 0.75rem (12px) | Extra small icons                     |
| `--size-icon-sm`       | `icon-sm`        | 1rem (16px)    | Small icons                           |
| `--size-icon-md`       | `icon-md`        | 1.25rem (20px) | Medium icons (standard)               |
| `--size-icon-lg`       | `icon-lg`        | 1.5rem (24px)  | Large icons                           |
| `--size-icon-xl`       | `icon-xl`        | 2rem (32px)    | Extra large icons                     |
| `--size-avatar-sm`     | `size-avatar-sm` | 2rem (32px)    | Small avatar                          |
| `--size-avatar-md`     | `size-avatar-md` | 2.5rem (40px)  | Medium avatar                         |
| `--size-avatar-lg`     | `size-avatar-lg` | 3rem (48px)    | Large avatar                          |

### Container Sizes

| Token                             | Utility Class          | Value            | Usage                                    |
| --------------------------------- | ---------------------- | ---------------- | ---------------------------------------- |
| `--size-max-width-readable`       | `max-w-readable`       | 42rem (672px)    | Optimal reading width (65-75 characters) |
| `--size-max-width-container`      | `max-w-container`      | 72rem (1152px)   | Max container width                      |
| `--size-min-width-dropdown`       | `min-w-dropdown`       | 11.25rem (180px) | Minimum dropdown width                   |
| `--size-max-width-dialog-default` | `max-w-dialog-default` | 100vw            | Default dialog width (mobile)            |

### Specialized Sizes

| Token                     | Utility Class           | Value         | Usage                      |
| ------------------------- | ----------------------- | ------------- | -------------------------- |
| `--size-pin-cell`         | `size-pin-cell`         | 4rem (64px)   | Square PIN input cell      |
| `--size-pin-cell-text`    | `size-pin-cell-text`    | 2rem (32px)   | Text size inside PIN cells |
| `--size-tab-height`       | `size-tab-height`       | 2.5rem (40px) | Tab container height       |
| `--size-keyboard-key`     | `size-keyboard-key`     | 3rem (48px)   | Keyboard shortcut display  |
| `--size-quote-decoration` | `size-quote-decoration` | 5rem (80px)   | Decorative quote mark size |

**Example:**

```svelte
<!-- Button with standard height -->
<button class="min-h-button px-button-x py-button-y">Click me</button>

<!-- Avatar sizes -->
<img class="size-avatar-sm rounded-avatar" src="..." alt="User" />
<img class="size-avatar-md rounded-avatar" src="..." alt="User" />
<img class="size-avatar-lg rounded-avatar" src="..." alt="User" />

<!-- Icon sizes -->
<svg class="icon-sm">...</svg>
<svg class="icon-md">...</svg>
<svg class="icon-lg">...</svg>

<!-- Readable content -->
<article class="max-w-readable">
	<p>Long-form content optimized for readability...</p>
</article>
```

**Cascade Example:**

Change button height in `design-system.json`:

```json
{
	"size": {
		"buttonheight": {
			"$value": "3rem" // Changed from 2.75rem (44px) to 3rem (48px)
		}
	}
}
```

After running `npm run tokens:build`:

- âœ… CSS variable updates: `--size-button-height: 3rem`
- âœ… All buttons use new height automatically
- âœ… No code changes needed

---

## ğŸ”¢ Z-Index Tokens

Z-index tokens provide consistent layering for overlapping UI elements:

| Token                          | Utility Class          | Value | Usage                               |
| ------------------------------ | ---------------------- | ----- | ----------------------------------- |
| `--z-index-sidebar`            | `z-sidebar`            | 50    | Sidebar layer                       |
| `--z-index-panel-backdrop-min` | `z-panel-backdrop-min` | 51    | Panel backdrop (above sidebar)      |
| `--z-index-panel-base`         | `z-panel-base`         | 60    | First panel layer                   |
| `--z-index-panel-increment`    | N/A                    | 10    | Increment per panel (60, 70, 80...) |

**Usage Pattern:**

```svelte
<!-- Sidebar -->
<aside class="z-sidebar">Sidebar content</aside>

<!-- Panel backdrop -->
<div class="z-panel-backdrop-min bg-black opacity-backdrop">Backdrop</div>

<!-- Panel layers (stacking) -->
<div class="z-panel-base">First panel (z-60)</div>
<div style="z-index: 70">Second panel (z-70)</div>
<div style="z-index: 80">Third panel (z-80)</div>
```

**Cascade Example:**

Change sidebar z-index in `design-system.json`:

```json
{
	"zIndex": {
		"sidebar": {
			"$value": "40" // Changed from 50 to 40
		}
	}
}
```

After running `npm run tokens:build`:

- âœ… CSS variable updates: `--z-index-sidebar: 40`
- âœ… All sidebar layers update automatically
- âœ… Panel backdrop remains above sidebar (z-51 > z-40)
- âœ… No code changes needed

**Why Layering Matters:**

Consistent z-index values prevent:

- âŒ Modal backdrops appearing above modal content
- âŒ Dropdowns hidden behind sidebars
- âŒ Tooltips buried under panels
- âŒ Random z-index values (999, 9999, 99999)

---

## ğŸ”¤ Icon Size Tokens

| Token            | Utility Class | Value          | Usage                   |
| ---------------- | ------------- | -------------- | ----------------------- |
| `--size-icon-xs` | `icon-xs`     | 0.75rem (12px) | Extra small icons       |
| `--size-icon-sm` | `icon-sm`     | 1rem (16px)    | Small icons             |
| `--size-icon-md` | `icon-md`     | 1.25rem (20px) | Medium icons (standard) |
| `--size-icon-lg` | `icon-lg`     | 1.5rem (24px)  | Large icons             |
| `--size-icon-xl` | `icon-xl`     | 2rem (32px)    | Extra large icons       |

**Example:**

```svelte
<button class="flex items-center gap-icon">
	<svg class="icon-md">...</svg>
	<span>Click me</span>
</button>
```

---

## ğŸ­ Transition Tokens

| Token                  | Utility Class             | Value                                           | Usage                                |
| ---------------------- | ------------------------- | ----------------------------------------------- | ------------------------------------ |
| `--transition-default` | `transition-default`      | all 0.2s ease                                   | Default transition (all props)       |
| `--transition-slow`    | `transition-slow`         | all 0.3s ease-in-out                            | Slow transition (animations)         |
| `--transition-fast`    | `transition-fast`         | all 0.15s ease                                  | Fast transition (micro-interactions) |
| `--transition-colors`  | `transition-colors-token` | color, background-color, border-color 0.2s ease | Color transitions only (optimized)   |

**Example:**

```svelte
<button class="bg-accent-primary transition-colors-token hover:bg-accent-hover"> Hover me </button>
```

---

## ğŸ“± Breakpoint Tokens

Breakpoint tokens define responsive design breakpoints following the Tailwind CSS pattern (mobile-first approach):

| Token              | Value    | Description                                                |
| ------------------ | -------- | ---------------------------------------------------------- |
| `--breakpoint-sm`  | `640px`  | Small devices (mobile landscape) - min-width breakpoint    |
| `--breakpoint-md`  | `768px`  | Medium devices (tablets) - min-width breakpoint            |
| `--breakpoint-lg`  | `1024px` | Large devices (desktop) - min-width breakpoint             |
| `--breakpoint-xl`  | `1280px` | Extra large devices (large desktop) - min-width breakpoint |
| `--breakpoint-2xl` | `1536px` | 2X large devices (ultra-wide) - min-width breakpoint       |

**Usage in JavaScript:**

```typescript
// Read breakpoint from CSS variable
const breakpointSm = getComputedStyle(document.documentElement)
	.getPropertyValue('--breakpoint-sm')
	.trim();
const breakpointValue = breakpointSm ? parseInt(breakpointSm, 10) : 640;
const isMobile = window.innerWidth < breakpointValue;
```

**Usage in CSS:**

```css
/* Note: CSS doesn't support CSS variables in @media queries */
/* Use token value directly with comment reference */
/* Token: --breakpoint-md (768px) from design-system.json */
@media (max-width: 768px) {
	.responsive-element {
		/* Mobile styles */
	}
}
```

**Cascade Example:**

Change breakpoint value in `design-system.json`:

```json
{
	"breakpoints": {
		"sm": {
			"$value": "768px" // Changed from 640px
		}
	}
}
```

After running `npm run tokens:build`:

- CSS variable updates: `--breakpoint-sm: 768px`
- JavaScript code automatically uses new value (no code changes needed)
- CSS `@media` queries need manual update (CSS limitation)

**Context7 Validated:** âœ… Follows Tailwind CSS pattern (industry standard)

---

## ğŸ‘ï¸ Opacity Tokens

Opacity tokens provide consistent transparency values for UI states (disabled, hover, loading, backdrops):

### Base Opacity Scale (0-100)

Tailwind-compatible opacity scale from transparent (0) to opaque (100):

| Token           | Value  | Description                    |
| --------------- | ------ | ------------------------------ |
| `--opacity-0`   | `0`    | Fully transparent (invisible)  |
| `--opacity-50`  | `0.5`  | 50% opacity                    |
| `--opacity-75`  | `0.75` | 75% opacity                    |
| `--opacity-80`  | `0.8`  | 80% opacity                    |
| `--opacity-100` | `1`    | Fully opaque (no transparency) |

### Semantic Opacity Tokens

Use these semantic tokens for consistent UI states:

| Token                | Utility Class      | References          | Value  | Usage                        |
| -------------------- | ------------------ | ------------------- | ------ | ---------------------------- |
| `--opacity-disabled` | `opacity-disabled` | `var(--opacity-50)` | `0.5`  | Disabled button/input states |
| `--opacity-hover`    | `opacity-hover`    | `var(--opacity-80)` | `0.8`  | Hover overlay effects        |
| `--opacity-backdrop` | `opacity-backdrop` | `var(--opacity-75)` | `0.75` | Modal/dialog backdrops       |
| `--opacity-loading`  | `opacity-loading`  | `var(--opacity-60)` | `0.6`  | Loading state indicators     |

### Usage Examples

```svelte
<!-- âŒ WRONG: Hardcoded opacity -->
<button style="opacity: 0.5" disabled>Save</button>
<div class="bg-black" style="opacity: 0.75">Backdrop</div>

<!-- âœ… CORRECT: Semantic opacity tokens -->
<button class="opacity-disabled" disabled>Save</button>
<div class="bg-black opacity-backdrop">Backdrop</div>
```

### Cascade Example

Change disabled opacity value in `design-system.json`:

```json
{
	"opacity": {
		"disabled": {
			"$value": "{opacity.40}" // Changed from {opacity.50}
		}
	}
}
```

After running `npm run tokens:build`:

- âœ… CSS variable updates: `--opacity-disabled: var(--opacity-40)`
- âœ… All disabled elements automatically use 40% opacity
- âœ… No code changes needed

**Context7 Validated:** âœ… Follows Tailwind CSS pattern (industry standard)

---

## ğŸ“š Reference Documentation

### Source of Truth

**`design-system.json`** (root of project) is the **single source of truth** for all design tokens.

- âœ… **DTCG Format**: Uses Design Tokens Community Group format (`$value`, `$description`)
- âœ… **Base Tokens**: Foundation values (e.g., `spacing.2 = "0.5rem"`)
- âœ… **Semantic Tokens**: Component-specific tokens referencing base tokens (e.g., `spacing.nav.item.x = "{spacing.2}"`)
- âœ… **Exception Documentation**: Tokens that don't reference base tokens must include "INTENTIONAL EXCEPTION" in description

**File location**: `design-system.json` (project root)

**Example structure:**

```json
{
	"spacing": {
		"2": {
			"$value": "0.5rem",
			"$description": "8px = sm"
		},
		"nav": {
			"item": {
				"x": {
					"$value": "{spacing.2}",
					"$description": "Nav item horizontal padding - references base scale"
				}
			}
		}
	}
}
```

### Workflow Commands

**Essential commands for working with design tokens:**

#### Build Tokens

**Generate CSS files from `design-system.json`:**

```bash
npm run tokens:build
```

**When to run:**

- After pulling changes from git
- After editing `design-system.json`
- Before committing token changes

**Output:**

- `src/styles/tokens/*.css` - CSS variable definitions
- `src/styles/utilities/*.css` - Utility class definitions

#### Validate Semantic Tokens

**Check that all semantic tokens reference base tokens correctly:**

```bash
npm run tokens:validate-semantic
```

**What it checks:**

- âœ… Semantic tokens use `{spacing.X}` format (not hardcoded values)
- âœ… Exception tokens include "INTENTIONAL EXCEPTION" in description
- âŒ Blocks semantic tokens with hardcoded values (unless documented exception)

**When to run:**

- Before committing token changes
- After adding new semantic tokens
- CI/CD pipeline (automated validation)

#### Watch Mode (Development)

**Auto-rebuild tokens when `design-system.json` changes:**

```bash
npm run tokens:watch
```

**Use during development** to see token changes immediately.

### Additional Documentation

- **Complete token list**: `dev-docs/2-areas/design/design-tokens.md` - Full documentation with usage patterns and examples
- **Workflow guide**: `DESIGN-TOKENS-WORKFLOW.md` - Step-by-step guide for adding tokens, migration, exceptions
- **Implementation**: `src/app.css` - CSS variable definitions and utility classes

---

## ğŸš« Common Violations

**âŒ BLOCKED - Will fail lint:**

```svelte
<!-- Hardcoded sizes -->
<button class="min-h-[2.75rem]">Click</button>
<div class="p-[12px]">Content</div>

<!-- Hardcoded spacing -->
<div class="mt-[24px] mb-[16px]">Content</div>

<!-- Hardcoded colors -->
<div class="bg-gray-900 text-white">Content</div>
```

**âœ… CORRECT - Uses tokens:**

```svelte
<!-- Token-based sizes -->
<button class="min-h-button">Click</button>
<div class="p-button-icon">Content</div>

<!-- Token-based spacing -->
<div class="mt-content-section mb-marketing-text">Content</div>

<!-- Token-based colors -->
<div class="bg-base text-primary">Content</div>
```

---

## ğŸ“Š Token Categories Summary

**Total Categories**: 14

1. **Spacing** - Component padding, margins, gaps (80+ tokens)
2. **Colors** - Semantic colors for light/dark mode (40+ tokens)
3. **Typography** - Font sizes, weights, line heights (20+ tokens)
4. **Fonts** - Font families for headings, body, code (6 tokens)
5. **Border Radius** - Rounded corners for components (7+ tokens)
6. **Shadow** - Elevation and depth effects (2 tokens)
7. **Size** - Fixed dimensions for components (25+ tokens)
8. **Transition** - Animation timing and easing (4 tokens)
9. **Breakpoints** - Responsive design breakpoints (5 tokens)
10. **Opacity** - Transparency values for UI states (16 tokens)
11. **Z-Index** - Layering for overlapping elements (4 tokens)

**Plus 3 sub-categories within Typography:** 12. Font Weight (6 tokens) 13. Line Height (1 token) 14. Letter Spacing (1 token)

**Last Updated**: November 22, 2025  
**Total Tokens**: 200+ across 14 categories
