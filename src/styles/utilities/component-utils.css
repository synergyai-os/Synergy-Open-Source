/* Component Utilities
 * 
 * All component-specific utility classes (card, button, badge, dialog, etc.).
 * 
 * Extracted from src/app.css @utility blocks (lines 947-1144, 1185-1196, 1276-1290)
 */

/* Panel Stack Navigation Utilities - Hierarchical panel navigation */
@utility panel-stack-base {
	/* Base panel positioning - MUST be used on all stacking panels */
	position: fixed;
	top: 0;
	right: 0; /* Always flush to right edge */
	height: 100vh;
	width: 100%;
	max-width: 100vw; /* Prevent overflow on small screens */
	background: var(--color-bg-elevated);
	border-left: 1px solid var(--color-border-base);
	/* DO NOT set transform here - Tailwind classes (translate-x-0/translate-x-full) handle it */
	transition: transform 300ms ease-in-out;
	z-index: var(--z-index-panel-base); /* Base z-60, ensures above sidebar z-50 */
	/* Overflow handled by inner flex layout, not here (prevents nested scroll areas) */
}

@utility panel-stack-offset {
	/* Marker class for panels with breadcrumbs - width set via inline styles */
	/* This ensures pointer-events work correctly on offset panels */
	pointer-events: auto;
}

@utility panel-breadcrumb-bar {
	/* Vertical bar showing previous layer name */
	position: absolute;
	left: 0;
	top: 0;
	bottom: 0;
	width: var(--spacing-panel-breadcrumb-width);
	background: var(--color-panel-breadcrumb-bg);
	border-right: 1px solid var(--color-border-base);
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	transition: background-color 150ms ease;
}

@utility panel-breadcrumb-bar-hover {
	background: var(--color-panel-breadcrumb-hover);
}

@utility panel-breadcrumb-text {
	/* Vertical text styling for breadcrumb */
	writing-mode: vertical-rl;
	transform: rotate(180deg);
	color: var(--color-panel-breadcrumb-text);
	font-size: 0.75rem; /* 12px */
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	user-select: none;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-height: calc(100vh - 2rem);
	padding: var(--spacing-panel-breadcrumb-padding);
}

@utility panel-content-with-breadcrumb {
	/* Content container offset when breadcrumb bar is present */
	/* Adds left padding equal to breadcrumb width to prevent overlap */
	padding-left: var(--spacing-panel-breadcrumb-width);
}

/* Card Component Utilities */
@utility rounded-card {
	border-radius: var(--border-radius-card);
}
@utility shadow-card {
	box-shadow: var(--shadow-card);
}
@utility shadow-card-hover {
	box-shadow: var(--shadow-card-hover);
}
@utility px-card {
	padding-inline: var(--spacing-card-padding-x);
}
@utility py-card {
	padding-block: var(--spacing-card-padding-y);
}

/* Dialog Component Utilities */
@utility max-w-dialog-default {
	max-width: var(--max-width-dialog-default);
}
@utility max-w-dialog-wide {
	max-width: var(--max-width-dialog-wide);
}
@utility rounded-dialog {
	border-radius: var(--border-radius-dialog);
}
@utility min-w-dropdown {
	min-width: var(--min-width-dropdown);
}

/* Dialog Close Button Utility - Standardized styling for icon close buttons */
@utility dialog-close-button {
	/* Sizing - ensure proper touch targets */
	padding: var(--spacing-button-icon); /* 0.75rem (12px) - matches icon-only buttons */
	min-height: var(--size-button-height); /* 2.75rem (44px) - accessibility minimum */
	min-width: var(--size-button-height); /* 2.75rem (44px) - square button */

	/* Layout */
	display: inline-flex;
	align-items: center;
	justify-content: center;

	/* Styling */
	border-radius: var(--border-radius-button); /* 0.5rem (8px) */
	background-color: transparent;
	color: var(--color-text-secondary);

	/* Transitions */
	transition: var(--transition-colors);

	/* States */
	&:hover {
		background-color: var(--color-bg-hover-solid);
		color: var(--color-text-primary);
	}

	/* Focus visible - only show on keyboard navigation, not mouse clicks */
	&:focus-visible {
		outline: 2px solid var(--color-accent-primary);
		outline-offset: 2px;
	}

	/* Remove default focus ring for mouse clicks */
	&:focus:not(:focus-visible) {
		outline: none;
	}

	&:disabled {
		opacity: 0.5;
		cursor: not-allowed;
	}
}

/* Accordion Component Utilities */
@utility px-accordion {
	padding-inline: var(--spacing-accordion-padding-x);
}
@utility py-accordion {
	padding-block: var(--spacing-accordion-padding-y);
}
@utility gap-accordion {
	gap: var(--spacing-accordion-gap);
}

/* Button Component Utilities */
@utility text-button {
	font-size: var(--font-size-button);
	font-weight: var(--font-weight-button);
}
@utility min-h-button {
	min-height: var(--size-button-height);
}

/* Badge Component Utilities */
@utility rounded-badge {
	border-radius: var(--border-radius-badge);
}
@utility text-badge {
	font-size: var(--font-size-badge);
	font-weight: var(--font-weight-badge);
}
@utility min-w-badge {
	min-width: var(--min-width-badge);
}

/* Chip Component Utilities */
@utility px-chip {
	padding-inline: var(--spacing-chip-x);
}
@utility py-chip {
	padding-block: var(--spacing-chip-y);
}
@utility gap-chip {
	gap: var(--spacing-chip-gap);
}
@utility p-chip-close {
	padding: var(--spacing-chip-close-padding);
}
@utility -mr-chip-close {
	margin-right: calc(var(--spacing-chip-close-padding) * -1);
}
@utility rounded-chip {
	border-radius: var(--border-radius-chip);
}
@utility text-chip {
	font-size: var(--font-size-chip);
	font-weight: var(--font-weight-chip);
}

/* Input Border Radius Utility */
@utility rounded-input {
	border-radius: var(--border-radius-input);
}

/* Destructive Button Utilities */
@utility bg-destructive {
	background-color: var(--color-destructive-button);
}
@utility bg-destructive-hover {
	background-color: var(--color-destructive-button-hover);
}

/* Border Radius Utilities */
@utility rounded-input {
	border-radius: 0.375rem; /* 6px */
}
@utility rounded-button {
	border-radius: var(--border-radius-button); /* 8px - uses token for consistency */
}
@utility rounded-modal {
	border-radius: 0.5rem; /* 8px */
}

/* Shadow Utilities */
@utility shadow-pin-glow {
	box-shadow: var(--shadow-pin-glow);
}

/* Tab Component Utilities */
@utility px-tab {
	padding-inline: var(--spacing-tab-padding-x);
}
@utility py-tab {
	padding-block: var(--spacing-tab-padding-y);
}
@utility rounded-tab-container {
	border-radius: var(--border-radius-tab-container);
}
@utility rounded-tab-item {
	border-radius: var(--border-radius-tab-item);
}
